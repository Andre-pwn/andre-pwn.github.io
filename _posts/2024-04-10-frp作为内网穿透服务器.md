---
title: 使用frp实现内网穿透
categories: [技术工具]
tags: [frp, 内网穿透]
date: 2024-04-10
---

# 使用frp实现内网穿透

内网穿透是一种技术，它允许用户从外部网络访问内网中的服务。这在进行远程工作、家庭网络设置或开发测试时非常有用。本文将介绍如何使用[frp](https://github.com/fatedier/frp)（Fast Reverse Proxy）作为内网穿透工具。

## frp简介

frp是一个高性能的反向代理应用，支持多种协议，包括TCP、UDP、HTTP、HTTPS等。它由服务端和客户端组成，通过在公网服务器上部署frp服务端，然后在内网环境中运行frp客户端，即可实现内网服务的穿透访问。

## 安装frp

1. **下载frp**：访问frp的[GitHub发布页面](https://github.com/fatedier/frp/releases)，下载适合您操作系统的版本。

2. **解压缩**：下载完成后，解压缩文件到您希望的目录。

3. **配置frp**：frp的工作需要服务端和客户端的配置文件。您可以在解压缩的文件夹中找到示例配置文件`frps.toml`（服务端）和`frpc.toml`（客户端）。(旧版本为ini文件)

## 配置frp服务端

编辑`frps.toml`文件，一个基本的配置如下所示：

```toml
# 设置frp服务端监听的端口
bindPort = 7001

# 设置frp的Web管理界面监听的端口
webServer.port = 7500

# 设置frp的Web管理界面的监听地址，默认监听所有网络接口
webServer.addr = "0.0.0.0"
# 注意: dashboard 用户名密码在这个配置段落外设置，如果需要启用，请在配置文件中添加相应的dashboard用户名和密码配置项

```
这个配置指定了frp服务端监听的端口，几个端口均可以根据自己需求自由修改。

配置frp客户端
编辑frpc.toml文件，配置内网服务穿透的详细信息，例如：
```toml
serverAddr = "x.x.x.x"
serverPort = 7001

[[proxies]]
name = "ssh"
type = "tcp"
localIP = "127.0.0.1"
localPort = 22
remotePort = 6000
```
`localIP` 和 `localPort` 配置为需要从公网访问的内网服务的地址和端口。
`remotePort` 表示在 frp 服务端监听的端口，访问此端口的流量将被转发到本地服务的相应端口。

启动frp  
在服务端，运行`./frps -c ./frps.toml`启动frp服务端。  
在客户端，运行`./frpc -c ./frpc.toml`启动frp客户端。  
完成以上步骤后，您就可以通过配置的公网地址或域名访问内网服务了。  
`ssh -o Port=6000 test@x.x.x.x`


## 结语  
使用frp实现内网穿透是一个简单而有效的方法，可以帮助您轻松访问内网中的服务。更多高级配置和使用技巧，请参考[frp的官方文档](https://gofrp.org/)。  
